<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.aia.gdp.mapper.JobExecutionLogMapper">
    <select id="selectByJobCode" resultType="com.aia.gdp.model.JobExecutionLog">
        SELECT * FROM job_execution_log WHERE job_code = #{jobCode} ORDER BY start_time DESC
    </select>
    <select id="selectByBatchNo" resultType="com.aia.gdp.model.JobExecutionLog">
        SELECT * FROM job_execution_log WHERE batch_no = #{batchNo} ORDER BY start_time ASC
    </select>
    <select id="selectAll" resultType="com.aia.gdp.model.JobExecutionLog">
        SELECT * FROM job_execution_log
    </select>
    <select id="selectById" resultType="com.aia.gdp.model.JobExecutionLog">
        SELECT * FROM job_execution_log WHERE log_id = #{logId}
    </select>
    <insert id="insert" parameterType="com.aia.gdp.model.JobExecutionLog" useGeneratedKeys="true" keyProperty="logId">
        INSERT INTO job_execution_log (job_code, batch_no, executor_proc, executor_address, start_time, end_time, status, error_message, duration, notify_status, retry_count, create_time)
        VALUES (#{jobCode}, #{batchNo}, #{executorProc}, #{executorAddress}, #{startTime}, #{endTime}, #{status}, #{errorMessage}, #{duration}, #{notifyStatus}, #{retryCount}, #{createTime})
    </insert>
    <update id="update" parameterType="com.aia.gdp.model.JobExecutionLog">
        UPDATE job_execution_log SET
            job_code=#{jobCode}, batch_no=#{batchNo}, executor_proc=#{executorProc}, executor_address=#{executorAddress},
            start_time=#{startTime}, end_time=#{endTime}, status=#{status}, error_message=#{errorMessage},
            duration=#{duration}, notify_status=#{notifyStatus}, retry_count=#{retryCount}, create_time=#{createTime}
        WHERE log_id=#{logId}
    </update>
    <delete id="deleteById">
        DELETE FROM job_execution_log WHERE log_id = #{logId}
    </delete>
</mapper> 