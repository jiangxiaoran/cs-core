(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]||[]).push([["05793652"],{f8a682cf:function(e,t,o){o.d(t,"__esModule",{value:!0}),o.e(t,{default:function(){return eg;}});var n=o("777fffbe"),a=o("852bbaa9"),l=o("19e41895"),r=o("775ffda6"),i=n._(r),s=o("eb28dd03"),c=a._(s),d={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},u=o("94090ee9"),f=n._(u),m=c.forwardRef(function(e,t){return c.createElement(f.default,(0,i.default)({},e,{ref:t,icon:d}));}),p=o("70263cbd"),g=n._(p),h=o("47f762a0"),b=o("3a9c9f06"),v=n._(b),y=o("ad24b541"),$=o("bc8de48a"),x=n._($),w=o("d56a7f9d"),S=n._(w),j=o("a383f638"),k=n._(j),_=o("56b512b5"),I=n._(_),E=o("7229953c"),C=n._(E),O=o("2d8a3217"),A=n._(O),N=o("553cb676"),M=n._(N),z=o("09a6646f"),T=n._(z),H=o("1dd1cdd4"),P=o("97b8be9a");o("e6e8c012");var B=o("e8e063c4"),L=o("0b02f1cc"),R=o("46294f54"),D=o("cbd570ea");let V=(e,t,o,n,a)=>({background:e,border:`${(0,L.unit)(n.lineWidth)} ${n.lineType} ${t}`,[`${a}-icon`]:{color:o}}),W=e=>{let{componentCls:t,motionDurationSlow:o,marginXS:n,marginSM:a,fontSize:l,fontSizeLG:r,lineHeight:i,borderRadiusLG:s,motionEaseInOutCirc:c,withDescriptionIconSize:d,colorText:u,colorTextHeading:f,withDescriptionPadding:m,defaultPadding:p}=e;return{[t]:Object.assign(Object.assign({},(0,R.resetComponent)(e)),{position:"relative",display:"flex",alignItems:"center",padding:p,wordWrap:"break-word",borderRadius:s,[`&${t}-rtl`]:{direction:"rtl"},[`${t}-content`]:{flex:1,minWidth:0},[`${t}-icon`]:{marginInlineEnd:n,lineHeight:0},"&-description":{display:"none",fontSize:l,lineHeight:i},"&-message":{color:f},[`&${t}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${o} ${c}, opacity ${o} ${c},
        padding-top ${o} ${c}, padding-bottom ${o} ${c},
        margin-bottom ${o} ${c}`},[`&${t}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${t}-with-description`]:{alignItems:"flex-start",padding:m,[`${t}-icon`]:{marginInlineEnd:a,fontSize:d,lineHeight:0},[`${t}-message`]:{display:"block",marginBottom:n,color:f,fontSize:r},[`${t}-description`]:{display:"block",color:u}},[`${t}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}};},q=e=>{let{componentCls:t,colorSuccess:o,colorSuccessBorder:n,colorSuccessBg:a,colorWarning:l,colorWarningBorder:r,colorWarningBg:i,colorError:s,colorErrorBorder:c,colorErrorBg:d,colorInfo:u,colorInfoBorder:f,colorInfoBg:m}=e;return{[t]:{"&-success":V(a,n,o,e,t),"&-info":V(m,f,u,e,t),"&-warning":V(i,r,l,e,t),"&-error":Object.assign(Object.assign({},V(d,c,s,e,t)),{[`${t}-description > pre`]:{margin:0,padding:0}})}};},F=e=>{let{componentCls:t,iconCls:o,motionDurationMid:n,marginXS:a,fontSizeIcon:l,colorIcon:r,colorIconHover:i}=e;return{[t]:{"&-action":{marginInlineStart:a},[`${t}-close-icon`]:{marginInlineStart:a,padding:0,overflow:"hidden",fontSize:l,lineHeight:(0,L.unit)(l),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${o}-close`]:{color:r,transition:`color ${n}`,"&:hover":{color:i}}},"&-close-text":{color:r,transition:`color ${n}`,"&:hover":{color:i}}}};};var G=(0,D.genStyleHooks)("Alert",e=>[W(e),q(e),F(e)],e=>({withDescriptionIconSize:e.fontSizeHeading3,defaultPadding:`${e.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${e.paddingMD}px ${e.paddingContentHorizontalLG}px`})),U=this&&this.__rest||function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)0>t.indexOf(n[a])&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(o[n[a]]=e[n[a]]);return o;};let J={success:x.default,info:C.default,error:S.default,warning:I.default},Q=e=>{let{icon:t,prefixCls:o,type:n}=e,a=J[n]||null;return t?(0,P.replaceElement)(t,c.createElement("span",{className:`${o}-icon`},t),()=>({className:(0,A.default)(`${o}-icon`,t.props.className)})):c.createElement(a,{className:`${o}-icon`});},X=e=>{let{isClosable:t,prefixCls:o,closeIcon:n,handleClose:a,ariaProps:l}=e,r=!0===n||void 0===n?c.createElement(k.default,null):n;return t?c.createElement("button",Object.assign({type:"button",onClick:a,className:`${o}-close-icon`,tabIndex:0},l),r):null;},K=c.forwardRef((e,t)=>{let{description:o,prefixCls:n,message:a,banner:l,className:r,rootClassName:i,style:s,onMouseEnter:d,onMouseLeave:u,onClick:f,afterClose:m,showIcon:p,closable:g,closeText:h,closeIcon:b,action:v,id:y}=e,$=U(e,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[x,w]=c.useState(!1),S=c.useRef(null);c.useImperativeHandle(t,()=>({nativeElement:S.current}));let{getPrefixCls:j,direction:k,closable:_,closeIcon:I,className:E,style:C}=(0,B.useComponentConfig)("alert"),O=j("alert",n),[N,z,P]=G(O),L=t=>{var o;w(!0),null===(o=e.onClose)||void 0===o||o.call(e,t);},R=c.useMemo(()=>void 0!==e.type?e.type:l?"warning":"info",[e.type,l]),D=c.useMemo(()=>"object"==typeof g&&!!g.closeIcon||!!h||("boolean"==typeof g?g:!1!==b&&null!=b||!!_),[h,b,g,_]),V=!!l&&void 0===p||p,W=(0,A.default)(O,`${O}-${R}`,{[`${O}-with-description`]:!!o,[`${O}-no-icon`]:!V,[`${O}-banner`]:!!l,[`${O}-rtl`]:"rtl"===k},E,r,i,P,z),q=(0,T.default)($,{aria:!0,data:!0}),F=c.useMemo(()=>"object"==typeof g&&g.closeIcon?g.closeIcon:h||(void 0!==b?b:"object"==typeof _&&_.closeIcon?_.closeIcon:I),[b,g,h,I]),J=c.useMemo(()=>{let e=null!=g?g:_;if("object"==typeof e){let{closeIcon:t}=e;return U(e,["closeIcon"]);}return{};},[g,_]);return N(c.createElement(M.default,{visible:!x,motionName:`${O}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:e=>({maxHeight:e.offsetHeight}),onLeaveEnd:m},({className:t,style:n},l)=>c.createElement("div",Object.assign({id:y,ref:(0,H.composeRef)(S,l),"data-show":!x,className:(0,A.default)(W,t),style:Object.assign(Object.assign(Object.assign({},C),s),n),onMouseEnter:d,onMouseLeave:u,onClick:f,role:"alert"},q),V?c.createElement(Q,{description:o,icon:e.icon,prefixCls:O,type:R}):null,c.createElement("div",{className:`${O}-content`},a?c.createElement("div",{className:`${O}-message`},a):null,o?c.createElement("div",{className:`${O}-description`},o):null),v?c.createElement("div",{className:`${O}-action`},v):null,c.createElement(X,{isClosable:D,prefixCls:O,closeIcon:F,handleClose:L,ariaProps:J}))));});var Y=o("bbe27430"),Z=n._(Y),ee=o("9b78f3db"),et=n._(ee),eo=o("fab5e277"),en=n._(eo),ea=o("27057f55"),el=n._(ea),er=o("9511cd2a"),ei=n._(er),es=o("9460a18a"),ec=n._(es);let ed=function(e){function t(){var e,o,n;return(0,Z.default)(this,t),o=t,n=arguments,o=(0,en.default)(o),(e=(0,ei.default)(this,(0,el.default)()?Reflect.construct(o,n||[],(0,en.default)(this).constructor):o.apply(this,n))).state={error:void 0,info:{componentStack:""}},e;}return(0,ec.default)(t,e),(0,et.default)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,info:t});}},{key:"render",value:function(){let{message:e,description:t,id:o,children:n}=this.props,{error:a,info:l}=this.state,r=(null==l?void 0:l.componentStack)||null,i=void 0===e?(a||"").toString():e;return a?c.createElement(K,{id:o,type:"error",message:i,description:c.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},void 0===t?r:t)}):n;}}]);}(c.Component);K.ErrorBoundary=ed;var eu=o("44acd96a"),ef=n._(eu),em=o("73738355");let ep=({content:e})=>(0,l.jsx)(K,{style:{marginBottom:24},message:e,type:"error",showIcon:!0}),eg=()=>{let[e,t]=(0,c.useState)(null),[o,n]=(0,c.useState)("account"),[a,r]=(0,c.useState)(!1),{initialState:i,setInitialState:s}=(0,y.useModel)("@@initialState"),d=async e=>{if(!a){console.log("\u{1F680} \u5F00\u59CB\u767B\u5F55\u6D41\u7A0B...",e),r(!0);try{let a=await (0,em.login)({...e,type:o});if(console.log("\u{1F4E1} \u767B\u5F55API\u54CD\u5E94:",a),console.log("\u{1F4E1} \u54CD\u5E94\u7C7B\u578B:",typeof a),console.log("\u{1F4E1} \u54CD\u5E94\u5185\u5BB9:",JSON.stringify(a,null,2)),a&&200===a.code){var n,l,i;ef.default.success("\u767B\u5F55\u6210\u529F\uFF01"),console.log("\u{1F510} \u767B\u5F55\u6210\u529F\uFF0C\u5F00\u59CB\u5904\u7406\u8DF3\u8F6C\u903B\u8F91..."),(null===(n=a.data)||void 0===n?void 0:n.token)&&(localStorage.setItem("token",a.data.token),console.log("\u2705 Token\u5DF2\u4FDD\u5B58\u5230localStorage")),(null===(l=a.data)||void 0===l?void 0:l.refreshToken)&&(localStorage.setItem("refreshToken",a.data.refreshToken),console.log("\u2705 RefreshToken\u5DF2\u4FDD\u5B58\u5230localStorage")),(null===(i=a.data)||void 0===i?void 0:i.user)?(console.log("\u{1F464} \u7528\u6237\u4FE1\u606F:",a.data.user),await s(e=>({...e,currentUser:a.data.user})),console.log("\u2705 \u7528\u6237\u72B6\u6001\u5DF2\u66F4\u65B0"),setTimeout(()=>{let e=new URL(window.location.href).searchParams.get("redirect")||"/dashboard";e.startsWith("/data-platform")&&(e=e.substring(14)||"/dashboard"),e.startsWith("/")||(e="/"+e),console.log("\u{1F504} \u51C6\u5907\u8DF3\u8F6C\u5230:",e),console.log("\u{1F680} \u6267\u884C\u8DF3\u8F6C...");try{y.history.push(e),console.log("\u2705 \u8DF3\u8F6C\u6210\u529F");}catch(t){console.error("\u274C \u8DF3\u8F6C\u5931\u8D25:",t),window.location.href=e;}},500)):console.error("\u274C \u6CA1\u6709\u7528\u6237\u4FE1\u606F\uFF0C\u65E0\u6CD5\u8DF3\u8F6C");return;}t(a);}catch(e){console.log(e),ef.default.error("\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01");}finally{r(!1);}}};return(0,l.jsx)("div",{style:{display:"flex",flexDirection:"column",height:"100vh",overflow:"auto",backgroundImage:"url('https://mdn.alipayobjects.com/yuyan_qk0oxh/afts/img/V-_oS6r-i7wAAAAAAAAAAAAAFl94AQBr')",backgroundSize:"100% 100%"},children:(0,l.jsx)("div",{style:{flex:"1",padding:"32px 0"},children:(0,l.jsxs)(h.LoginForm,{contentStyle:{minWidth:280,maxWidth:"75vw"},logo:(0,l.jsx)("img",{alt:"logo",src:"/data-platform/logo.svg"}),title:"GDP\u4F5C\u4E1A\u8C03\u5EA6\u7CFB\u7EDF",subTitle:"\u4F01\u4E1A\u7EA7\u5206\u5E03\u5F0F\u4EFB\u52A1\u8C03\u5EA6\u5E73\u53F0",initialValues:{autoLogin:!0},onFinish:async e=>{await d(e);},children:[e&&200!==e.code&&e.message&&(0,l.jsx)(ep,{content:e.message}),(0,l.jsx)(v.default,{name:"username",fieldProps:{size:"large",prefix:(0,l.jsx)(g.default,{})},placeholder:"\u7528\u6237\u540D: admin or user",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"}]}),(0,l.jsx)(v.default.Password,{name:"password",fieldProps:{size:"large",prefix:(0,l.jsx)(m,{})},placeholder:"\u5BC6\u7801: 123456",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"}]}),(0,l.jsx)("div",{style:{marginBottom:24},children:(0,l.jsx)("a",{style:{float:"right"},children:"\u5FD8\u8BB0\u5BC6\u7801"})})]})})});};}}]);
//# sourceMappingURL=05793652-async.0c2ab4b1.js.map