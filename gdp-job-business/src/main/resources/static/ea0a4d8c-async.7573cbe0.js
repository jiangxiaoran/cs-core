(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]||[]).push([["ea0a4d8c"],{f1740030:function(e,t,l){l.d(t,"__esModule",{value:!0}),l.e(t,{default:function(){return e1;}});var a=l("777fffbe"),r=l("852bbaa9"),s=l("19e41895"),i=l("7b92fca5"),n=l("093db183"),o=l("090ba710"),d=l("5b2127f8"),c=a._(d),u=l("44acd96a"),f=a._(u),h=l("17ec3a38"),m=a._(h),g=l("b2b06e38"),x=a._(g),p=l("61dfd942"),j=a._(p),y=l("13762a59"),b=a._(y),S=l("3fb15aa3"),C=a._(S),E=l("cf23f1fe"),v=a._(E),N=l("546db771"),I=a._(N),w=l("7490b365"),T=a._(w),$=l("775ffda6"),D=a._($),P=l("eb28dd03"),k=r._(P),O={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"},L=l("94090ee9"),A=a._(L),B=k.forwardRef(function(e,t){return k.createElement(A.default,(0,D.default)({},e,{ref:t,icon:O}));}),z=l("bd4280aa"),M=a._(z),U=l("061ac3aa"),_=l("ab01855a"),R=a._(_),G=l("2d8a3217"),H=a._(G);l("e6e8c012");var F=l("e8e063c4"),J=l("59845252"),W=a._(J),Y=l("0b02f1cc"),q=l("46294f54"),X=l("cbd570ea"),V=l("7e7b86e8");let K=e=>{let{componentCls:t,calc:l}=e;return{[t]:Object.assign(Object.assign({},(0,q.resetComponent)(e)),{margin:0,padding:0,listStyle:"none",[`${t}-item`]:{position:"relative",margin:0,paddingBottom:e.itemPaddingBottom,fontSize:e.fontSize,listStyle:"none","&-tail":{position:"absolute",insetBlockStart:e.itemHeadSize,insetInlineStart:l(l(e.itemHeadSize).sub(e.tailWidth)).div(2).equal(),height:`calc(100% - ${(0,Y.unit)(e.itemHeadSize)})`,borderInlineStart:`${(0,Y.unit)(e.tailWidth)} ${e.lineType} ${e.tailColor}`},"&-pending":{[`${t}-item-head`]:{fontSize:e.fontSizeSM,backgroundColor:"transparent"},[`${t}-item-tail`]:{display:"none"}},"&-head":{position:"absolute",width:e.itemHeadSize,height:e.itemHeadSize,backgroundColor:e.dotBg,border:`${(0,Y.unit)(e.dotBorderWidth)} ${e.lineType} transparent`,borderRadius:"50%","&-blue":{color:e.colorPrimary,borderColor:e.colorPrimary},"&-red":{color:e.colorError,borderColor:e.colorError},"&-green":{color:e.colorSuccess,borderColor:e.colorSuccess},"&-gray":{color:e.colorTextDisabled,borderColor:e.colorTextDisabled}},"&-head-custom":{position:"absolute",insetBlockStart:l(e.itemHeadSize).div(2).equal(),insetInlineStart:l(e.itemHeadSize).div(2).equal(),width:"auto",height:"auto",marginBlockStart:0,paddingBlock:e.customHeadPaddingVertical,lineHeight:1,textAlign:"center",border:0,borderRadius:0,transform:"translate(-50%, -50%)"},"&-content":{position:"relative",insetBlockStart:l(l(e.fontSize).mul(e.lineHeight).sub(e.fontSize)).mul(-1).add(e.lineWidth).equal(),marginInlineStart:l(e.margin).add(e.itemHeadSize).equal(),marginInlineEnd:0,marginBlockStart:0,marginBlockEnd:0,wordBreak:"break-word"},"&-last":{[`> ${t}-item-tail`]:{display:"none"},[`> ${t}-item-content`]:{minHeight:l(e.controlHeightLG).mul(1.2).equal()}}},[`&${t}-alternate,
        &${t}-right,
        &${t}-label`]:{[`${t}-item`]:{"&-tail, &-head, &-head-custom":{insetInlineStart:"50%"},"&-head":{marginInlineStart:l(e.marginXXS).mul(-1).equal(),"&-custom":{marginInlineStart:l(e.tailWidth).div(2).equal()}},"&-left":{[`${t}-item-content`]:{insetInlineStart:`calc(50% - ${(0,Y.unit)(e.marginXXS)})`,width:`calc(50% - ${(0,Y.unit)(e.marginSM)})`,textAlign:"start"}},"&-right":{[`${t}-item-content`]:{width:`calc(50% - ${(0,Y.unit)(e.marginSM)})`,margin:0,textAlign:"end"}}}},[`&${t}-right`]:{[`${t}-item-right`]:{[`${t}-item-tail,
            ${t}-item-head,
            ${t}-item-head-custom`]:{insetInlineStart:`calc(100% - ${(0,Y.unit)(l(l(e.itemHeadSize).add(e.tailWidth)).div(2).equal())})`},[`${t}-item-content`]:{width:`calc(100% - ${(0,Y.unit)(l(e.itemHeadSize).add(e.marginXS).equal())})`}}},[`&${t}-pending
        ${t}-item-last
        ${t}-item-tail`]:{display:"block",height:`calc(100% - ${(0,Y.unit)(e.margin)})`,borderInlineStart:`${(0,Y.unit)(e.tailWidth)} dotted ${e.tailColor}`},[`&${t}-reverse
        ${t}-item-last
        ${t}-item-tail`]:{display:"none"},[`&${t}-reverse ${t}-item-pending`]:{[`${t}-item-tail`]:{insetBlockStart:e.margin,display:"block",height:`calc(100% - ${(0,Y.unit)(e.margin)})`,borderInlineStart:`${(0,Y.unit)(e.tailWidth)} dotted ${e.tailColor}`},[`${t}-item-content`]:{minHeight:l(e.controlHeightLG).mul(1.2).equal()}},[`&${t}-label`]:{[`${t}-item-label`]:{position:"absolute",insetBlockStart:l(l(e.fontSize).mul(e.lineHeight).sub(e.fontSize)).mul(-1).add(e.tailWidth).equal(),width:`calc(50% - ${(0,Y.unit)(e.marginSM)})`,textAlign:"end"},[`${t}-item-right`]:{[`${t}-item-label`]:{insetInlineStart:`calc(50% + ${(0,Y.unit)(e.marginSM)})`,width:`calc(50% - ${(0,Y.unit)(e.marginSM)})`,textAlign:"start"}}},"&-rtl":{direction:"rtl",[`${t}-item-head-custom`]:{transform:"translate(50%, -50%)"}}})};};var Q=(0,X.genStyleHooks)("Timeline",e=>[K((0,V.mergeToken)(e,{itemHeadSize:10,customHeadPaddingVertical:e.paddingXXS,paddingInlineEnd:2}))],e=>({tailColor:e.colorSplit,tailWidth:e.lineWidthBold,dotBorderWidth:e.wireframe?e.lineWidthBold:3*e.lineWidth,dotBg:e.colorBgContainer,itemPaddingBottom:1.25*e.padding})),Z=this&&this.__rest||function(e,t){var l={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(l[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)0>t.indexOf(a[r])&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(l[a[r]]=e[a[r]]);return l;};let ee=e=>{var{prefixCls:t,className:l,color:a="blue",dot:r,pending:s=!1,position:i,label:n,children:o}=e,d=Z(e,["prefixCls","className","color","dot","pending","position","label","children"]);let{getPrefixCls:c}=k.useContext(F.ConfigContext),u=c("timeline",t),f=(0,H.default)(`${u}-item`,{[`${u}-item-pending`]:s},l),h=/blue|red|green|gray/.test(a||"")?void 0:a,m=(0,H.default)(`${u}-item-head`,{[`${u}-item-head-custom`]:!!r,[`${u}-item-head-${a}`]:!h});return k.createElement("li",Object.assign({},d,{className:f}),n&&k.createElement("div",{className:`${u}-item-label`},n),k.createElement("div",{className:`${u}-item-tail`}),k.createElement("div",{className:m,style:{borderColor:h,color:h}},r),k.createElement("div",{className:`${u}-item-content`},o));};var et=l("1496dc7b"),el=a._(et),ea=l("29df7637"),er=a._(ea),es=this&&this.__rest||function(e,t){var l={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(l[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)0>t.indexOf(a[r])&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(l[a[r]]=e[a[r]]);return l;};let ei=e=>{var{prefixCls:t,className:l,pending:a=!1,children:r,items:s,rootClassName:i,reverse:n=!1,direction:o,hashId:d,pendingDot:c,mode:u=""}=e,f=es(e,["prefixCls","className","pending","children","items","rootClassName","reverse","direction","hashId","pendingDot","mode"]);let h=(e,l)=>"alternate"===u?"right"===e?`${t}-item-right`:"left"===e?`${t}-item-left`:l%2==0?`${t}-item-left`:`${t}-item-right`:"left"===u?`${t}-item-left`:"right"===u||"right"===e?`${t}-item-right`:"",m=(0,el.default)(s||[]),g="boolean"==typeof a?null:a;a&&m.push({pending:!!a,dot:c||k.createElement(er.default,null),children:g}),n&&m.reverse();let x=m.length,p=`${t}-item-last`,j=m.filter(e=>!!e).map((e,t)=>{var l;let r=t===x-2?p:"",s=t===x-1?p:"",{className:i}=e,o=es(e,["className"]);return k.createElement(ee,Object.assign({},o,{className:(0,H.default)([i,!n&&a?r:s,h(null!==(l=null==e?void 0:e.position)&&void 0!==l?l:"",t)]),key:(null==e?void 0:e.key)||t}));}),y=m.some(e=>!!(null==e?void 0:e.label)),b=(0,H.default)(t,{[`${t}-pending`]:!!a,[`${t}-reverse`]:!!n,[`${t}-${u}`]:!!u&&!y,[`${t}-label`]:y,[`${t}-rtl`]:"rtl"===o},l,i,d);return k.createElement("ol",Object.assign({},f,{className:b}),j);};var en=l("5c16d33b"),eo=a._(en),ed=this&&this.__rest||function(e,t){var l={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(l[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)0>t.indexOf(a[r])&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(l[a[r]]=e[a[r]]);return l;};let ec=e=>{let{getPrefixCls:t,direction:l,timeline:a}=k.useContext(F.ConfigContext),{prefixCls:r,children:s,items:i,className:n,style:o}=e,d=ed(e,["prefixCls","children","items","className","style"]),c=t("timeline",r),u=(0,W.default)(c),[f,h,m]=Q(c,u),g=i&&Array.isArray(i)?i:(0,eo.default)(s).map(e=>{var t,l;return Object.assign({children:null!==(l=null===(t=null==e?void 0:e.props)||void 0===t?void 0:t.children)&&void 0!==l?l:""},e.props);});return f(k.createElement(ei,Object.assign({},d,{className:(0,H.default)(null==a?void 0:a.className,n,m,u),style:Object.assign(Object.assign({},null==a?void 0:a.style),o),prefixCls:c,direction:l,items:g,hashId:h})));};ec.Item=ee;var eu=l("36e3022b"),ef=a._(eu),eh=l("4c9cb067"),em=a._(eh),eg=l("70263cbd"),ex=a._(eg),ep=l("7634859a"),ej=a._(ep),ey=l("263270d8"),eb=a._(ey),eS={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 512a48 48 0 1096 0 48 48 0 10-96 0zm200 0a48 48 0 1096 0 48 48 0 10-96 0zm-400 0a48 48 0 1096 0 48 48 0 10-96 0zm661.2-173.6c-22.6-53.7-55-101.9-96.3-143.3a444.35 444.35 0 00-143.3-96.3C630.6 75.7 572.2 64 512 64h-2c-60.6.3-119.3 12.3-174.5 35.9a445.35 445.35 0 00-142 96.5c-40.9 41.3-73 89.3-95.2 142.8-23 55.4-34.6 114.3-34.3 174.9A449.4 449.4 0 00112 714v152a46 46 0 0046 46h152.1A449.4 449.4 0 00510 960h2.1c59.9 0 118-11.6 172.7-34.3a444.48 444.48 0 00142.8-95.2c41.3-40.9 73.8-88.7 96.5-142 23.6-55.2 35.6-113.9 35.9-174.5.3-60.9-11.5-120-34.8-175.6zm-151.1 438C704 845.8 611 884 512 884h-1.7c-60.3-.3-120.2-15.3-173.1-43.5l-8.4-4.5H188V695.2l-4.5-8.4C155.3 633.9 140.3 574 140 513.7c-.4-99.7 37.7-193.3 107.6-263.8 69.8-70.5 163.1-109.5 262.8-109.9h1.7c50 0 98.5 9.7 144.2 28.9 44.6 18.7 84.6 45.6 119 80 34.3 34.3 61.3 74.4 80 119 19.4 46.2 29.1 95.2 28.9 145.8-.6 99.6-39.7 192.9-110.1 262.7z"}}]},name:"message",theme:"outlined"},eC=k.forwardRef(function(e,t){return k.createElement(A.default,(0,D.default)({},e,{ref:t,icon:eS}));}),eE=l("2cbf69e4"),ev=a._(eE);let eN=e=>{if(!e)return"-";try{let t="string"==typeof e?new Date(e):e;if(isNaN(t.getTime()))return"-";let l=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),s=String(t.getHours()).padStart(2,"0"),i=String(t.getMinutes()).padStart(2,"0"),n=String(t.getSeconds()).padStart(2,"0");return`${l}-${a}-${r} ${s}:${i}:${n}`;}catch(e){return console.error("\u65F6\u95F4\u683C\u5F0F\u5316\u9519\u8BEF:",e),"-";}},eI=e=>{if(!e||e<=0||isNaN(e)||!isFinite(e))return"-";if(e<60)return`${e}\u{79D2}`;if(e<3600){let t=Math.floor(e/60);return`${t}\u{5206}${e%60}\u{79D2}`;}{let t=Math.floor(e/3600),l=Math.floor(e%3600/60);return`${t}\u{65F6}${l}\u{5206}${e%60}\u{79D2}`;}},{Title:ew,Text:eT}=em.default,e$=({log:e})=>{let t=(()=>{let t=[];if(t.push({icon:(0,s.jsx)(ex.default,{style:{color:"#1890ff"}}),title:"\u4EFB\u52A1\u5DF2\u5206\u914D",subtitle:`\u{5DF2}\u{5206}\u{914D}\u{7ED9}\u{6267}\u{884C}\u{5668}: ${e.executorProc||"\u672A\u77E5"}`,time:eN(e.startTime),color:"#1890ff"}),e.startTime&&t.push({icon:(0,s.jsx)(I.default,{style:{color:"#52c41a"}}),title:"\u5F00\u59CB\u6267\u884C",subtitle:`\u{7531}\u{6267}\u{884C}\u{5668}\u{5F00}\u{59CB}\u{6267}\u{884C}\u{4EFB}\u{52A1}`,time:eN(e.startTime),color:"#52c41a"}),"RUNNING"===e.status?t.push({icon:(0,s.jsx)(ej.default,{style:{color:"#faad14"}}),title:"\u6267\u884C\u4E2D",subtitle:"\u4EFB\u52A1\u6B63\u5728\u6267\u884C\u4E2D...",time:eN(new Date),color:"#faad14"}):"PAUSED"===e.status&&t.push({icon:(0,s.jsx)(v.default,{style:{color:"#faad14"}}),title:"\u5DF2\u6682\u505C",subtitle:"\u4EFB\u52A1\u6267\u884C\u5DF2\u6682\u505C",time:eN(e.startTime),color:"#faad14"}),"SUCCESS"===e.status&&e.endTime?t.push({icon:(0,s.jsx)(eb.default,{style:{color:"#52c41a"}}),title:"\u6267\u884C\u5B8C\u6210",subtitle:`\u{4EFB}\u{52A1}\u{6267}\u{884C}\u{6210}\u{529F}\u{FF0C}\u{8017}\u{65F6} ${e.duration||0} \u{79D2}`,time:eN(e.endTime),color:"#52c41a"}):"FAILED"===e.status&&e.endTime?t.push({icon:(0,s.jsx)(ev.default,{style:{color:"#ff4d4f"}}),title:"\u6267\u884C\u5931\u8D25",subtitle:e.errorMessage||"\u4EFB\u52A1\u6267\u884C\u5931\u8D25",time:eN(e.endTime),color:"#ff4d4f"}):"STOPPED"===e.status&&e.endTime&&t.push({icon:(0,s.jsx)(T.default,{style:{color:"#ff4d4f"}}),title:"\u6267\u884C\u505C\u6B62",subtitle:"\u4EFB\u52A1\u6267\u884C\u88AB\u624B\u52A8\u505C\u6B62",time:eN(e.endTime),color:"#ff4d4f"}),e.notifyStatus){let l,a,r;switch(e.notifyStatus){case"SENT":l=(0,s.jsx)(eb.default,{}),a="\u901A\u77E5\u5DF2\u53D1\u9001",r="#52c41a";break;case"PENDING":l=(0,s.jsx)(ej.default,{}),a="\u901A\u77E5\u5F85\u53D1\u9001",r="#faad14";break;case"FAILED":l=(0,s.jsx)(ev.default,{}),a="\u901A\u77E5\u53D1\u9001\u5931\u8D25",r="#ff4d4f";break;default:l=(0,s.jsx)(eC,{}),a="\u901A\u77E5\u72B6\u6001\u672A\u77E5",r="#8c8c8c";}t.push({icon:k.default.cloneElement(l,{style:{color:r}}),title:a,subtitle:`\u{901A}\u{77E5}\u{72B6}\u{6001}: ${e.notifyStatus}`,time:e.endTime||e.startTime,color:r});}return t;})();return(0,s.jsxs)(x.default,{direction:"vertical",size:"large",style:{width:"100%"},children:[(0,s.jsxs)(ef.default,{title:"\u4EFB\u52A1\u65F6\u95F4\u7EBF",size:"small",children:[(0,s.jsx)(eT,{type:"secondary",style:{display:"block",marginBottom:16},children:"\u901A\u8FC7\u8BE6\u7EC6\u7684\u66F4\u65B0\u548C\u65F6\u95F4\u6233\u8DDF\u8E2A\u4EFB\u52A1\u7684\u6267\u884C\u8FDB\u5EA6\u3002"}),(0,s.jsx)(ec,{items:t.map((e,t)=>({color:e.color,children:(0,s.jsxs)("div",{style:{marginBottom:16},children:[(0,s.jsx)("div",{style:{fontWeight:"bold",marginBottom:4},children:e.title}),(0,s.jsx)("div",{style:{color:"#666",fontSize:"12px",marginBottom:2},children:e.subtitle}),(0,s.jsx)("div",{style:{color:"#999",fontSize:"11px"},children:e.time})]})}))})]}),(0,s.jsx)(ef.default,{title:"\u4EFB\u52A1\u8BE6\u60C5",size:"small",children:(0,s.jsxs)(R.default,{column:2,size:"small",bordered:!0,children:[(0,s.jsx)(R.default.Item,{label:"\u65E5\u5FD7ID",span:1,children:e.logId}),(0,s.jsx)(R.default.Item,{label:"\u4F5C\u4E1A\u4EE3\u7801",span:1,children:e.jobCode}),(0,s.jsx)(R.default.Item,{label:"\u6279\u6B21\u53F7",span:1,children:e.batchNo||"-"}),(0,s.jsx)(R.default.Item,{label:"\u6267\u884C\u72B6\u6001",span:1,children:(e=>{switch(e){case"SUCCESS":return(0,s.jsx)(j.default,{color:"success",children:"\u6210\u529F"});case"FAILED":return(0,s.jsx)(j.default,{color:"error",children:"\u5931\u8D25"});case"RUNNING":return(0,s.jsx)(j.default,{color:"processing",children:"\u8FD0\u884C\u4E2D"});case"PENDING":return(0,s.jsx)(j.default,{color:"default",children:"\u7B49\u5F85\u4E2D"});case"PAUSED":return(0,s.jsx)(j.default,{color:"warning",children:"\u5DF2\u6682\u505C"});default:return(0,s.jsx)(j.default,{color:"default",children:e});}})(e.status)}),(0,s.jsx)(R.default.Item,{label:"\u5F00\u59CB\u65F6\u95F4",span:1,children:e.startTime}),(0,s.jsx)(R.default.Item,{label:"\u7ED3\u675F\u65F6\u95F4",span:1,children:e.endTime||"-"}),(0,s.jsx)(R.default.Item,{label:"\u6267\u884C\u65F6\u957F",span:1,children:e.duration?`${e.duration}\u{79D2}`:"-"}),(0,s.jsx)(R.default.Item,{label:"\u91CD\u8BD5\u6B21\u6570",span:1,children:e.retryCount||0}),(0,s.jsx)(R.default.Item,{label:"\u901A\u77E5\u72B6\u6001",span:2,children:e.notifyStatus?(0,s.jsx)(j.default,{color:"SENT"===e.notifyStatus?"success":"PENDING"===e.notifyStatus?"warning":"error",children:"SENT"===e.notifyStatus?"\u5DF2\u53D1\u9001":"PENDING"===e.notifyStatus?"\u5F85\u53D1\u9001":"\u53D1\u9001\u5931\u8D25"}):"-"}),e.errorMessage&&(0,s.jsx)(R.default.Item,{label:"\u9519\u8BEF\u4FE1\u606F",span:2,children:(0,s.jsx)(eT,{type:"danger",children:e.errorMessage})})]})}),(0,s.jsx)(ef.default,{title:"\u5907\u6CE8",size:"small",children:(0,s.jsx)(eT,{type:"secondary",children:e.errorMessage?`\u{6267}\u{884C}\u{8FC7}\u{7A0B}\u{4E2D}\u{51FA}\u{73B0}\u{9519}\u{8BEF}: ${e.errorMessage}`:"\u4EFB\u52A1\u6267\u884C\u6B63\u5E38\uFF0C\u65E0\u7279\u6B8A\u5907\u6CE8\u3002"})})]});};var eD=l("ca35db6d"),eP=a._(eD),ek=l("3761f98e"),eO=a._(ek),eL=l("d1f794b5"),eA=a._(eL),eB=l("68e5e351"),ez=a._(eB),eM=l("61ec9319"),eU=a._(eM),e_=l("aea10729"),eR=a._(e_),eG=k.forwardRef(function(e,t){return k.createElement(A.default,(0,D.default)({},e,{ref:t,icon:eR.default}));}),eH=l("2312abc7"),eF=a._(eH);let eJ=({batchNo:e,onSuccess:t})=>{let[l,a]=(0,k.useState)(!1),[r,i]=(0,k.useState)(null),n=async()=>{try{a(!0);let[t,l]=await Promise.all([(0,U.getBatchJobs)(e),(0,U.getBatchGroups)(e)]);t.success&&l.success&&i({jobs:t.data||[],groups:l.data||[]});}catch(e){f.default.error("\u83B7\u53D6\u6279\u6B21\u4FE1\u606F\u5931\u8D25");}finally{a(!1);}},o=async()=>{try{a(!0);let l=await (0,U.batchPauseJobsByBatchNo)(e);l.success?(f.default.success(l.msg||"\u6279\u91CF\u6682\u505C\u6210\u529F"),null==t||t()):f.default.error(l.msg||"\u6279\u91CF\u6682\u505C\u5931\u8D25");}catch(e){f.default.error("\u6279\u91CF\u6682\u505C\u5931\u8D25");}finally{a(!1);}},d=async()=>{try{a(!0);let l=await (0,U.batchStopJobsByBatchNo)(e);l.success?(f.default.success(l.msg||"\u6279\u91CF\u505C\u6B62\u6210\u529F"),null==t||t()):f.default.error(l.msg||"\u6279\u91CF\u505C\u6B62\u5931\u8D25");}catch(e){f.default.error("\u6279\u91CF\u505C\u6B62\u5931\u8D25");}finally{a(!1);}};return(0,s.jsx)("div",{children:(0,s.jsxs)(x.default,{direction:"vertical",size:"small",style:{width:"100%"},children:[(0,s.jsxs)("div",{style:{marginBottom:16},children:[(0,s.jsxs)(j.default,{color:"blue",children:["\u6279\u6B21\u53F7: ",e]}),r&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(j.default,{color:"green",children:["\u4F5C\u4E1A\u6570\u91CF: ",r.jobs.length]}),(0,s.jsxs)(j.default,{color:"orange",children:["\u4F5C\u4E1A\u7EC4\u6570\u91CF: ",r.groups.length]})]})]}),(0,s.jsxs)(x.default,{wrap:!0,children:[(0,s.jsx)(C.default,{title:"\u67E5\u770B\u6279\u6B21\u8BE6\u60C5",children:(0,s.jsx)(c.default,{icon:(0,s.jsx)(M.default,{}),onClick:n,loading:l,children:"\u67E5\u770B\u8BE6\u60C5"})}),(0,s.jsx)(C.default,{title:"\u6279\u91CF\u6682\u505C",children:(0,s.jsx)(c.default,{icon:(0,s.jsx)(v.default,{}),onClick:o,loading:l,children:"\u6279\u91CF\u6682\u505C"})}),(0,s.jsx)(C.default,{title:"\u6279\u91CF\u505C\u6B62",children:(0,s.jsx)(c.default,{icon:(0,s.jsx)(T.default,{}),onClick:d,loading:l,children:"\u6279\u91CF\u505C\u6B62"})}),(0,s.jsx)(C.default,{title:"\u6E05\u7406\u6279\u6B21\u6570\u636E",children:(0,s.jsx)(c.default,{icon:(0,s.jsx)(eF.default,{}),danger:!0,onClick:()=>{m.default.confirm({title:"\u786E\u8BA4\u6E05\u7406",content:`\u{786E}\u{5B9A}\u{8981}\u{6E05}\u{7406}\u{6279}\u{6B21} ${e} \u{7684}\u{6240}\u{6709}\u{6570}\u{636E}\u{5417}\u{FF1F}\u{6B64}\u{64CD}\u{4F5C}\u{4E0D}\u{53EF}\u{6062}\u{590D}\u{FF01}`,okText:"\u786E\u8BA4\u6E05\u7406",okType:"danger",cancelText:"\u53D6\u6D88",onOk:async()=>{try{a(!0);let l=await (0,U.cleanupBatchData)(e);l.success?(f.default.success(l.msg||"\u6279\u6B21\u6570\u636E\u6E05\u7406\u6210\u529F"),null==t||t()):f.default.error(l.msg||"\u6279\u6B21\u6570\u636E\u6E05\u7406\u5931\u8D25");}catch(e){f.default.error("\u6279\u6B21\u6570\u636E\u6E05\u7406\u5931\u8D25");}finally{a(!1);}}});},loading:l,children:"\u6E05\u7406\u6570\u636E"})})]}),r&&(0,s.jsxs)("div",{style:{marginTop:16},children:[(0,s.jsx)("h4",{children:"\u6279\u6B21\u8BE6\u60C5"}),(0,s.jsxs)("div",{style:{marginBottom:8},children:[(0,s.jsx)("strong",{children:"\u4F5C\u4E1A\u5217\u8868:"}),r.jobs.length>0?(0,s.jsx)("div",{style:{marginTop:4},children:r.jobs.map((e,t)=>(0,s.jsx)(j.default,{color:"blue",style:{marginBottom:4},children:e},t))}):(0,s.jsx)("span",{style:{color:"#999"},children:" \u65E0\u4F5C\u4E1A"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"\u4F5C\u4E1A\u7EC4\u5217\u8868:"}),r.groups.length>0?(0,s.jsx)("div",{style:{marginTop:4},children:r.groups.map((e,t)=>(0,s.jsx)(j.default,{color:"orange",style:{marginBottom:4},children:e},t))}):(0,s.jsx)("span",{style:{color:"#999"},children:" \u65E0\u4F5C\u4E1A\u7EC4"})]})]})]})});},{Title:eW,Text:eY}=em.default,eq=({batchNo:e,onClose:t})=>{let[l,a]=(0,k.useState)([]),[r,i]=(0,k.useState)(null),[n,o]=(0,k.useState)(!1),d=async()=>{o(!0);try{let t=await (0,U.getJobExecutionLogList)({batchNo:e});if(t&&t.success&&t.data){let e=(Array.isArray(t.data)?t.data:t.data.list||[]).sort((e,t)=>new Date(e.startTime).getTime()-new Date(t.startTime).getTime());a(e);}}catch(e){console.error("\u83B7\u53D6\u6279\u6B21\u4EFB\u52A1\u5931\u8D25:",e);}finally{o(!1);}},u=async()=>{try{console.log("\u{1F50D} \u5F00\u59CB\u83B7\u53D6\u6279\u6B21\u7EDF\u8BA1\u4FE1\u606F\uFF0C\u6279\u6B21\u53F7:",e);let t=await (0,U.getBatchStatistics)(e);console.log("\u{1F50D} \u6279\u6B21\u7EDF\u8BA1API\u54CD\u5E94:",t),console.log("\u{1F50D} \u54CD\u5E94\u7C7B\u578B:",typeof t),console.log("\u{1F50D} \u54CD\u5E94\u7ED3\u6784:",JSON.stringify(t,null,2)),t&&t.success&&t.data?(console.log("\u{1F50D} \u8BBE\u7F6E\u6279\u6B21\u7EDF\u8BA1\u6570\u636E:",t.data),i(t.data)):console.warn("\u{1F50D} \u6279\u6B21\u7EDF\u8BA1\u54CD\u5E94\u683C\u5F0F\u4E0D\u6B63\u786E:",t);}catch(e){console.error("\u{1F50D} \u83B7\u53D6\u6279\u6B21\u7EDF\u8BA1\u5931\u8D25:",e);}};(0,k.useEffect)(()=>{d(),u();},[e]);let f=e=>{switch(null==e?void 0:e.toUpperCase()){case"SUCCESS":case"COMPLETED":return(0,s.jsx)(j.default,{color:"success",children:"\u6210\u529F"});case"FAILED":return(0,s.jsx)(j.default,{color:"error",children:"\u5931\u8D25"});case"RUNNING":return(0,s.jsx)(j.default,{color:"processing",children:"\u8FD0\u884C\u4E2D"});case"PENDING":return(0,s.jsx)(j.default,{color:"default",children:"\u7B49\u5F85\u4E2D"});case"PAUSED":return(0,s.jsx)(j.default,{color:"warning",children:"\u5DF2\u6682\u505C"});case"STOPPED":return(0,s.jsx)(j.default,{color:"error",children:"\u5DF2\u505C\u6B62"});case"CANCELLED":return(0,s.jsx)(j.default,{color:"default",children:"\u5DF2\u53D6\u6D88"});default:return(0,s.jsx)(j.default,{color:"default",children:e||"\u672A\u77E5"});}},h=e=>{switch(e){case"SENT":return(0,s.jsx)(j.default,{color:"success",children:"\u5DF2\u53D1\u9001"});case"PENDING":return(0,s.jsx)(j.default,{color:"warning",children:"\u5F85\u53D1\u9001"});case"FAILED":return(0,s.jsx)(j.default,{color:"error",children:"\u53D1\u9001\u5931\u8D25"});default:return(0,s.jsx)(j.default,{color:"default",children:e});}},m=0===l.length?[]:l.map((e,t)=>{var l;let a,r,i,n;switch(null===(l=e.status)||void 0===l?void 0:l.toUpperCase()){case"SUCCESS":case"COMPLETED":a=(0,s.jsx)(eb.default,{}),r="#52c41a",i="\u6267\u884C\u6210\u529F",n="success";break;case"FAILED":a=(0,s.jsx)(ev.default,{}),r="#ff4d4f",i="\u6267\u884C\u5931\u8D25",n="error";break;case"RUNNING":a=(0,s.jsx)(ej.default,{}),r="#faad14",i="\u6267\u884C\u4E2D",n="processing";break;case"PENDING":a=(0,s.jsx)(ej.default,{}),r="#d9d9d9",i="\u7B49\u5F85\u4E2D",n="default";break;case"PAUSED":a=(0,s.jsx)(v.default,{}),r="#faad14",i="\u5DF2\u6682\u505C",n="warning";break;case"STOPPED":a=(0,s.jsx)(T.default,{}),r="#ff4d4f",i="\u5DF2\u505C\u6B62",n="error";break;case"CANCELLED":a=(0,s.jsx)(B,{}),r="#d9d9d9",i="\u5DF2\u53D6\u6D88",n="default";break;default:a=(0,s.jsx)(eG,{}),r="#d9d9d9",i=e.status||"\u672A\u77E5",n="default";}let o=new Date(e.startTime),d=e.endTime?new Date(e.endTime):null,c=0;return e.duration&&!isNaN(e.duration)&&isFinite(e.duration)?c=e.duration:d&&!isNaN(o.getTime())&&!isNaN(d.getTime())&&(isNaN(c=Math.round((d.getTime()-o.getTime())/1e3))||!isFinite(c)||c<0)&&(c=0),{icon:k.default.cloneElement(a,{style:{color:r}}),color:r,children:(0,s.jsxs)("div",{style:{marginBottom:16,padding:"12px 16px",backgroundColor:"#fafafa",borderRadius:"6px",border:`1px solid ${r}20`,cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#f0f0f0",e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)";},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#fafafa",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none";},children:[(0,s.jsxs)("div",{style:{fontWeight:"bold",marginBottom:8,display:"flex",alignItems:"center",gap:8,fontSize:"14px"},children:[(0,s.jsxs)("span",{style:{color:"#1890ff"},children:["\u4EFB\u52A1 ",t+1,": ",e.jobCode]}),(0,s.jsx)(j.default,{color:n,style:{margin:0},children:i})]}),(0,s.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"8px",fontSize:"12px"},children:[(0,s.jsxs)("div",{style:{color:"#666"},children:[(0,s.jsx)(eY,{strong:!0,children:"\u5F00\u59CB\u65F6\u95F4:"})," ",eN(e.startTime)]}),d&&(0,s.jsxs)("div",{style:{color:"#666"},children:[(0,s.jsx)(eY,{strong:!0,children:"\u7ED3\u675F\u65F6\u95F4:"})," ",eN(e.endTime)]}),c>0&&(0,s.jsxs)("div",{style:{color:"#666"},children:[(0,s.jsx)(eY,{strong:!0,children:"\u6267\u884C\u65F6\u957F:"})," ",eI(c)]}),e.retryCount&&e.retryCount>0&&(0,s.jsxs)("div",{style:{color:"#faad14"},children:[(0,s.jsx)(eY,{strong:!0,children:"\u91CD\u8BD5\u6B21\u6570:"})," ",e.retryCount]})]}),e.errorMessage&&""!==e.errorMessage.trim()&&"SUCCESS"!==e.status.toUpperCase()&&!e.errorMessage.toLowerCase().includes("\u6210\u529F")&&(0,s.jsxs)("div",{style:{color:"#ff4d4f",fontSize:"12px",marginTop:"8px",padding:"8px",backgroundColor:"#fff2f0",border:"1px solid #ffccc7",borderRadius:"4px"},children:[(0,s.jsx)(eY,{strong:!0})," ",e.errorMessage]})]})};}),g=(null==r?void 0:r.totalJobs)||l.length,p=(null==r?void 0:r.runningJobs)||l.filter(e=>"RUNNING"===e.status.toUpperCase()).length,y=(null==r?void 0:r.completedJobs)||l.filter(e=>"SUCCESS"===e.status.toUpperCase()).length,b=(null==r?void 0:r.failedJobs)||l.filter(e=>"FAILED"===e.status.toUpperCase()).length,S=(null==r?void 0:r.pausedJobs)||l.filter(e=>"PAUSED"===e.status.toUpperCase()).length,E=(null==r?void 0:r.successRate)||(g>0?Math.round(y/g*100):0);return console.log("\u{1F50D} \u7EDF\u8BA1\u53D8\u91CF\u503C:",{batchStatistics:r,totalTasks:g,runningTasks:p,completedTasks:y,failedTasks:b,pausedTasks:S,successRate:E}),(0,s.jsxs)(x.default,{direction:"vertical",size:"large",style:{width:"100%"},children:[(0,s.jsx)(ef.default,{size:"small",children:(0,s.jsxs)(x.default,{style:{width:"100%",justifyContent:"space-between",alignItems:"center"},children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(eW,{level:4,style:{margin:0},children:"\u6279\u6B21\u8BE6\u60C5"}),(0,s.jsxs)(eY,{type:"secondary",children:["\u6279\u6B21\u53F7: ",e]})]}),(0,s.jsxs)(x.default,{children:[(0,s.jsx)(C.default,{title:"\u5237\u65B0\u6570\u636E",children:(0,s.jsx)(c.default,{icon:(0,s.jsx)(eU.default,{}),onClick:d,loading:n})}),(0,s.jsx)(c.default,{onClick:t,children:"\u5173\u95ED"})]})]})}),(0,s.jsxs)(ef.default,{title:"\u6279\u6B21\u7EDF\u8BA1",size:"small",children:[(0,s.jsxs)(eO.default,{gutter:16,children:[(0,s.jsx)(eA.default,{span:4,children:(0,s.jsx)(ez.default,{title:"\u603B\u4EFB\u52A1\u6570",value:g})}),(0,s.jsx)(eA.default,{span:4,children:(0,s.jsx)(ez.default,{title:"\u8FD0\u884C\u4E2D",value:p,valueStyle:{color:"#1890ff"}})}),(0,s.jsx)(eA.default,{span:4,children:(0,s.jsx)(ez.default,{title:"\u5DF2\u5B8C\u6210",value:y,valueStyle:{color:"#52c41a"}})}),(0,s.jsx)(eA.default,{span:4,children:(0,s.jsx)(ez.default,{title:"\u5DF2\u5931\u8D25",value:b,valueStyle:{color:"#ff4d4f"}})}),(0,s.jsx)(eA.default,{span:4,children:(0,s.jsx)(ez.default,{title:"\u5DF2\u6682\u505C",value:S,valueStyle:{color:"#faad14"}})}),(0,s.jsx)(eA.default,{span:4,children:(0,s.jsx)(ez.default,{title:"\u6210\u529F\u7387",value:E,suffix:"%",valueStyle:{color:E>=80?"#52c41a":E>=60?"#faad14":"#ff4d4f"}})})]}),r&&(0,s.jsx)("div",{style:{marginTop:16,textAlign:"center"},children:(0,s.jsxs)(eY,{type:"secondary",children:["\u6570\u636E\u6765\u6E90: ",r.dataSource," | \u66F4\u65B0\u65F6\u95F4: ",r.lastUpdateTime?new Date(r.lastUpdateTime).toLocaleString():"\u672A\u77E5"]})})]}),(0,s.jsx)(ef.default,{title:"\u6279\u6B21\u63A7\u5236",size:"small",children:(0,s.jsx)(eJ,{batchNo:e,onSuccess:()=>{d();}})}),(0,s.jsxs)(ef.default,{title:"\u6279\u6B21\u6267\u884C\u65F6\u95F4\u7EBF",size:"small",children:[(0,s.jsx)(eY,{type:"secondary",style:{display:"block",marginBottom:16},children:"\u6309\u7167\u6267\u884C\u987A\u5E8F\u663E\u793A\u6BCF\u4E2A\u4F5C\u4E1A\u4EFB\u52A1\u7684\u8BE6\u7EC6\u6267\u884C\u60C5\u51B5\u3002"}),(0,s.jsx)(ec,{items:m})]}),(0,s.jsx)(ef.default,{title:"\u4EFB\u52A1\u5217\u8868",size:"small",children:(0,s.jsx)(eP.default,{columns:[{title:"\u5E8F\u53F7",key:"index",width:60,render:(e,t,l)=>l+1},{title:"\u4EFB\u52A1ID",dataIndex:"logId",key:"logId",width:80},{title:"\u4F5C\u4E1A\u4EE3\u7801",dataIndex:"jobCode",key:"jobCode",width:120,ellipsis:!0},{title:"\u6267\u884C\u72B6\u6001",dataIndex:"status",key:"status",width:100,render:e=>f(e)},{title:"\u5F00\u59CB\u65F6\u95F4",dataIndex:"startTime",key:"startTime",width:150,render:e=>eN(e)},{title:"\u7ED3\u675F\u65F6\u95F4",dataIndex:"endTime",key:"endTime",width:150,render:e=>eN(e)},{title:"\u6267\u884C\u65F6\u957F",dataIndex:"duration",key:"duration",width:100,render:e=>null==e||isNaN(e)||!isFinite(e)?"-":eI(e)},{title:"\u901A\u77E5\u72B6\u6001",dataIndex:"notifyStatus",key:"notifyStatus",width:100,render:e=>e?h(e):"-"},{title:"\u91CD\u8BD5\u6B21\u6570",dataIndex:"retryCount",key:"retryCount",width:80}],dataSource:l,rowKey:"logId",size:"small",pagination:!1,loading:n,scroll:{x:800}})})]});},eX={PENDING:"PENDING",RUNNING:"RUNNING",PAUSED:"PAUSED",STOPPED:"STOPPED",COMPLETED:"COMPLETED",SUCCESS:"SUCCESS",FAILED:"FAILED",CANCELLED:"CANCELLED"},eV={[eX.PENDING]:{text:"\u7B49\u5F85\u4E2D",color:"default",status:"Default",icon:"ClockCircleOutlined",canPause:!0,canResume:!1,canStop:!0,canCancel:!0},[eX.RUNNING]:{text:"\u8FD0\u884C\u4E2D",color:"processing",status:"Processing",icon:"ClockCircleOutlined",canPause:!0,canResume:!1,canStop:!0,canCancel:!0},[eX.PAUSED]:{text:"\u5DF2\u6682\u505C",color:"warning",status:"Warning",icon:"PauseCircleOutlined",canPause:!1,canResume:!0,canStop:!0,canCancel:!0},[eX.STOPPED]:{text:"\u5DF2\u505C\u6B62",color:"error",status:"Error",icon:"StopOutlined",canPause:!1,canResume:!1,canStop:!1,canCancel:!1},[eX.COMPLETED]:{text:"\u5DF2\u5B8C\u6210",color:"success",status:"Success",icon:"CheckCircleOutlined",canPause:!1,canResume:!1,canStop:!1,canCancel:!1},[eX.SUCCESS]:{text:"\u6210\u529F",color:"success",status:"Success",icon:"CheckCircleOutlined",canPause:!1,canResume:!1,canStop:!1,canCancel:!1},[eX.FAILED]:{text:"\u5931\u8D25",color:"error",status:"Error",icon:"ExclamationCircleOutlined",canPause:!1,canResume:!1,canStop:!1,canCancel:!1},[eX.CANCELLED]:{text:"\u5DF2\u53D6\u6D88",color:"default",status:"Default",icon:"CloseCircleOutlined",canPause:!1,canResume:!1,canStop:!1,canCancel:!1}};function eK(e){return eV[null==e?void 0:e.toUpperCase()]||eV[eX.PENDING];}function eQ(e){return eK(e).text;}function eZ(e){return eK(e).status;}function e0(e){let t=eK(e),l=[];return t.canPause&&l.push("pause"),t.canResume&&l.push("resume"),t.canStop&&l.push("stop"),t.canCancel&&l.push("cancel"),l;}let e1=()=>{let e=(0,k.useRef)(null),[t,l]=(0,k.useState)([]),[a,r]=(0,k.useState)(!1),[d,u]=(0,k.useState)(),[h,g]=(0,k.useState)(!1),[p,y]=(0,k.useState)(""),[S,E]=(0,k.useState)(!0),N=e=>{let t=eK(e);return(0,s.jsx)(j.default,{color:t.color,children:t.text});},w=e=>{switch(e){case"SENT":return(0,s.jsx)(j.default,{color:"success",children:"\u5DF2\u53D1\u9001"});case"PENDING":return(0,s.jsx)(j.default,{color:"warning",children:"\u5F85\u53D1\u9001"});case"FAILED":return(0,s.jsx)(j.default,{color:"error",children:"\u53D1\u9001\u5931\u8D25"});default:return(0,s.jsx)(j.default,{color:"default",children:e});}},$=t=>{let l=[];l.push((0,s.jsx)(C.default,{title:"\u67E5\u770B\u8BE6\u60C5",children:(0,s.jsx)(c.default,{type:"text",size:"small",icon:(0,s.jsx)(M.default,{}),onClick:()=>{u(t),r(!0);}})},"detail"));let a=e0(t.status);return a.includes("pause")&&l.push((0,s.jsx)(C.default,{title:"\u6682\u505C",children:(0,s.jsx)(c.default,{type:"text",size:"small",icon:(0,s.jsx)(v.default,{}),onClick:async()=>{try{var l;await (0,U.pauseJobByLogId)(t.logId),f.default.success("\u6682\u505C\u6210\u529F"),null===(l=e.current)||void 0===l||l.reload();}catch(e){f.default.error("\u6682\u505C\u5931\u8D25");}}})},"pause")),a.includes("resume")&&l.push((0,s.jsx)(C.default,{title:"\u6062\u590D",children:(0,s.jsx)(c.default,{type:"text",size:"small",icon:(0,s.jsx)(I.default,{}),onClick:async()=>{try{var l;await (0,U.resumeJobByLogId)(t.logId),f.default.success("\u6062\u590D\u6210\u529F"),null===(l=e.current)||void 0===l||l.reload();}catch(e){f.default.error("\u6062\u590D\u5931\u8D25");}}})},"resume")),a.includes("stop")&&l.push((0,s.jsx)(C.default,{title:"\u505C\u6B62",children:(0,s.jsx)(c.default,{type:"text",size:"small",icon:(0,s.jsx)(T.default,{}),onClick:async()=>{try{var l;await (0,U.stopJobByLogId)(t.logId),f.default.success("\u505C\u6B62\u6210\u529F"),null===(l=e.current)||void 0===l||l.reload();}catch(e){f.default.error("\u505C\u6B62\u5931\u8D25");}}})},"stop")),a.includes("cancel")&&l.push((0,s.jsx)(C.default,{title:"\u53D6\u6D88",children:(0,s.jsx)(c.default,{type:"text",size:"small",icon:(0,s.jsx)(B,{}),onClick:async()=>{try{var l;await (0,U.cancelJobByLogId)(t.logId),f.default.success("\u53D6\u6D88\u6210\u529F"),null===(l=e.current)||void 0===l||l.reload();}catch(e){f.default.error("\u53D6\u6D88\u5931\u8D25");}}})},"cancel")),l;},D=async l=>{if(0===t.length){f.default.warning("\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u4EFB\u52A1");return;}let a={pause:{api:U.pauseJobByLogId,successMsg:"\u6682\u505C\u6210\u529F",errorMsg:"\u6682\u505C\u5931\u8D25"},resume:{api:U.resumeJobByLogId,successMsg:"\u6062\u590D\u6210\u529F",errorMsg:"\u6062\u590D\u5931\u8D25"},stop:{api:U.stopJobByLogId,successMsg:"\u505C\u6B62\u6210\u529F",errorMsg:"\u505C\u6B62\u5931\u8D25"},cancel:{api:U.cancelJobByLogId,successMsg:"\u53D6\u6D88\u6210\u529F",errorMsg:"\u53D6\u6D88\u5931\u8D25"}}[l];if(!a){f.default.error("\u4E0D\u652F\u6301\u7684\u64CD\u4F5C\u7C7B\u578B");return;}try{var r;let l=t.map(e=>a.api(e.logId));await Promise.all(l),f.default.success(a.successMsg),null===(r=e.current)||void 0===r||r.reload();}catch(e){f.default.error(a.errorMsg);}},P=[{title:"\u65E5\u5FD7ID",dataIndex:"logId",width:100,search:!1,sorter:!0,defaultSortOrder:"descend"},{title:"\u4F5C\u4E1A\u4EE3\u7801",dataIndex:"jobCode",width:150,ellipsis:!0,search:!0,render:(e,t)=>(0,s.jsx)("a",{onClick:()=>{u(t),r(!0);},style:{cursor:"pointer"},children:e})},{title:"\u6267\u884C\u72B6\u6001",dataIndex:"status",width:100,render:(e,t)=>N(t.status),valueType:"select",valueEnum:{[eX.PENDING]:{text:eQ(eX.PENDING),status:eZ(eX.PENDING)},[eX.RUNNING]:{text:eQ(eX.RUNNING),status:eZ(eX.RUNNING)},[eX.PAUSED]:{text:eQ(eX.PAUSED),status:eZ(eX.PAUSED)},[eX.STOPPED]:{text:eQ(eX.STOPPED),status:eZ(eX.STOPPED)},[eX.COMPLETED]:{text:eQ(eX.COMPLETED),status:eZ(eX.COMPLETED)},[eX.SUCCESS]:{text:eQ(eX.SUCCESS),status:eZ(eX.SUCCESS)},[eX.FAILED]:{text:eQ(eX.FAILED),status:eZ(eX.FAILED)},[eX.CANCELLED]:{text:eQ(eX.CANCELLED),status:eZ(eX.CANCELLED)}}},{title:"\u6279\u6B21\u53F7",dataIndex:"batchNo",width:180,ellipsis:!0,search:!0,render:(e,t)=>(0,s.jsx)("a",{onClick:()=>{y(t.batchNo||""),g(!0);},style:{cursor:"pointer"},children:e||"-"})},{title:"\u5F00\u59CB\u65F6\u95F4",dataIndex:"startTime",key:"startTime",width:160,search:{transform:e=>{if(Array.isArray(e)&&2===e.length){var t,l,a,r;return{startTime:(null===(l=e[0])||void 0===l?void 0:null===(t=l.format)||void 0===t?void 0:t.call(l,"YYYY-MM-DD HH:mm:ss"))||e[0],endTime:(null===(r=e[1])||void 0===r?void 0:null===(a=r.format)||void 0===a?void 0:a.call(r,"YYYY-MM-DD HH:mm:ss"))||e[1]};}return{};}},valueType:"dateTimeRange",fieldProps:{format:"YYYY-MM-DD HH:mm:ss",showTime:!0,placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],allowClear:!0,onChange:(t,l)=>{e.current&&e.current.reload();}},render:(e,t)=>t&&t.startTime?eN(t.startTime):"-"},{title:"\u7ED3\u675F\u65F6\u95F4",dataIndex:"endTime",width:160,search:!1,render:e=>"string"==typeof e?eN(e):e?String(e):"-"},{title:"\u9519\u8BEF\u4FE1\u606F",dataIndex:"errorMessage",ellipsis:!0,width:200,search:!1,render:e=>e||"-"},{title:"\u6267\u884C\u65F6\u957F(\u79D2)",dataIndex:"duration",width:120,search:!1,render:e=>null==e||isNaN(Number(e))||!isFinite(Number(e))?"-":eI(Number(e))},{title:"\u901A\u77E5\u72B6\u6001",dataIndex:"notifyStatus",width:100,render:(e,t)=>w(t.notifyStatus),valueType:"select",valueEnum:{SENT:{text:"\u5DF2\u53D1\u9001",status:"Success"},PENDING:{text:"\u5F85\u53D1\u9001",status:"Warning"},FAILED:{text:"\u53D1\u9001\u5931\u8D25",status:"Error"}}},{title:"\u6267\u884C\u5668\u5730\u5740",dataIndex:"executorAddress",width:150,ellipsis:!0,search:!0,render:e=>e||"-"},{title:"\u91CD\u8BD5\u6B21\u6570",dataIndex:"retryCount",width:100,search:!1},{title:"\u64CD\u4F5C",valueType:"option",width:120,render:(e,t)=>$(t)}],O=async()=>{if(0===t.length){f.default.warning("\u8BF7\u9009\u62E9\u8981\u6E05\u9664\u7684\u65E5\u5FD7");return;}m.default.confirm({title:"\u6279\u91CF\u6E05\u9664",content:`\u{786E}\u{5B9A}\u{8981}\u{6E05}\u{9664}\u{9009}\u{4E2D}\u{7684} ${t.length} \u{6761}\u{65E5}\u{5FD7}\u{5417}\u{FF1F}`,onOk:async()=>{try{var a;await Promise.all(t.map(e=>(0,U.clearJobExecutionLog)(e.logId))),f.default.success("\u6279\u91CF\u6E05\u9664\u6210\u529F"),l([]),null===(a=e.current)||void 0===a||a.reload();}catch(e){f.default.error("\u6279\u91CF\u6E05\u9664\u5931\u8D25");}}});};return(0,k.useEffect)(()=>{var t;null===(t=e.current)||void 0===t||t.reload();},[]),(0,s.jsxs)(i.PageContainer,{children:[(0,s.jsx)(n.ProTable,{headerTitle:"\u6267\u884C\u65E5\u5FD7",actionRef:e,rowKey:"logId",manualRequest:!1,revalidateOnFocus:!1,debounceTime:500,search:{labelWidth:120,defaultCollapsed:!0,collapsed:S,span:8,onCollapse:e=>{E(e);},collapseRender:e=>e?"\u5C55\u5F00\u641C\u7D22":"\u6536\u8D77\u641C\u7D22"},toolBarRender:()=>[(0,s.jsx)(C.default,{title:t.some(e=>e0(e.status).includes("resume"))?"\u6062\u590D":"\u6682\u505C",children:(0,s.jsx)(c.default,{icon:t.some(e=>e0(e.status).includes("resume"))?(0,s.jsx)(I.default,{}):(0,s.jsx)(v.default,{}),onClick:()=>{let e=t.some(e=>e0(e.status).includes("resume")),l=t.some(e=>e0(e.status).includes("pause"));if(e&&l){f.default.warning("\u8BF7\u9009\u62E9\u72B6\u6001\u76F8\u540C\u7684\u4EFB\u52A1\u8FDB\u884C\u6279\u91CF\u64CD\u4F5C");return;}e?D("resume"):l?D("pause"):f.default.warning("\u9009\u4E2D\u7684\u4EFB\u52A1\u4E0D\u652F\u6301\u6682\u505C/\u6062\u590D\u64CD\u4F5C");},disabled:0===t.length||!t.some(e=>e0(e.status).includes("pause")||e0(e.status).includes("resume"))})},"pause-resume"),(0,s.jsx)(C.default,{title:"\u505C\u6B62",children:(0,s.jsx)(c.default,{icon:(0,s.jsx)(T.default,{}),onClick:()=>D("stop"),disabled:0===t.length||!t.some(e=>e0(e.status).includes("stop"))})},"stop"),(0,s.jsx)(C.default,{title:"\u53D6\u6D88",children:(0,s.jsx)(c.default,{icon:(0,s.jsx)(B,{}),onClick:()=>D("cancel"),disabled:0===t.length||!t.some(e=>e0(e.status).includes("cancel"))})},"cancel"),(0,s.jsx)(c.default,{danger:!0,onClick:O,disabled:0===t.length,children:"\u6279\u91CF\u6E05\u9664"},"clear")],request:async e=>{try{let t={...e};if(e.sorter){let{field:l,order:a}=e.sorter;l&&a&&(t.orderBy=l,t.orderDirection="descend"===a?"desc":"asc");}t.orderBy||t.orderDirection||(t.orderBy="logId",t.orderDirection="desc"),Object.keys(t).forEach(e=>{(""===t[e]||null===t[e]||void 0===t[e])&&delete t[e];});let l=await (0,U.getJobExecutionLogList)(t);if(l&&l.success){if(l.data&&l.data.list)return{data:l.data.list,total:l.data.total||0,success:!0};if(l.data&&Array.isArray(l.data))return{data:l.data,total:l.data.length,success:!0};}if(l&&l.list)return{data:l.list,total:l.total||0,success:!0};if(Array.isArray(l))return{data:l,total:l.length,success:!0};return{data:[],total:0,success:!1};}catch(e){return console.error("\u83B7\u53D6\u6267\u884C\u65E5\u5FD7\u5217\u8868\u5931\u8D25:",e),{data:[],total:0,success:!1};}},columns:P,rowSelection:{onChange:(e,t)=>l(t)},pagination:{defaultPageSize:10,showSizeChanger:!0,showQuickJumper:!0}}),t.length>0&&(0,s.jsx)(o.FooterToolbar,{children:(0,s.jsxs)(x.default,{children:[(0,s.jsx)(C.default,{title:t.some(e=>e0(e.status).includes("resume"))?"\u6279\u91CF\u6062\u590D":"\u6279\u91CF\u6682\u505C",children:(0,s.jsx)(c.default,{icon:t.some(e=>e0(e.status).includes("resume"))?(0,s.jsx)(I.default,{}):(0,s.jsx)(v.default,{}),onClick:()=>{let e=t.some(e=>e0(e.status).includes("resume")),l=t.some(e=>e0(e.status).includes("pause"));if(e&&l){f.default.warning("\u8BF7\u9009\u62E9\u72B6\u6001\u76F8\u540C\u7684\u4EFB\u52A1\u8FDB\u884C\u6279\u91CF\u64CD\u4F5C");return;}e?D("resume"):l?D("pause"):f.default.warning("\u9009\u4E2D\u7684\u4EFB\u52A1\u4E0D\u652F\u6301\u6682\u505C/\u6062\u590D\u64CD\u4F5C");},disabled:!t.some(e=>e0(e.status).includes("pause")||e0(e.status).includes("resume"))})}),(0,s.jsx)(C.default,{title:"\u6279\u91CF\u505C\u6B62",children:(0,s.jsx)(c.default,{icon:(0,s.jsx)(T.default,{}),onClick:()=>D("stop"),disabled:!t.some(e=>e0(e.status).includes("stop"))})}),(0,s.jsx)(C.default,{title:"\u6279\u91CF\u53D6\u6D88",children:(0,s.jsx)(c.default,{icon:(0,s.jsx)(B,{}),onClick:()=>D("cancel"),disabled:!t.some(e=>e0(e.status).includes("cancel"))})}),(0,s.jsx)(c.default,{onClick:O,danger:!0,children:"\u6279\u91CF\u6E05\u9664"})]})}),(0,s.jsx)(b.default,{title:"\u65E5\u5FD7\u8BE6\u60C5",width:600,open:a,onClose:()=>{r(!1),u(void 0);},children:d&&(0,s.jsx)(e$,{log:d})}),(0,s.jsx)(b.default,{title:"\u6279\u6B21\u8BE6\u60C5",width:800,open:h,onClose:()=>{g(!1),y("");},children:p&&(0,s.jsx)(eq,{batchNo:p,onClose:()=>g(!1)})})]});};}}]);
//# sourceMappingURL=ea0a4d8c-async.7573cbe0.js.map