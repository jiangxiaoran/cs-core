{"version":3,"sources":["src/services/job/api.ts"],"sourcesContent":["import request from '@/utils/request';\r\n\r\n/** 获取任务列表 */\r\nexport async function getJobList(params: API.JobListParams) {\r\n  return request('/v1/jobs', {\r\n    method: 'GET',\r\n    params,\r\n  });\r\n}\r\n\r\n/** 获取执行器分组 */\r\nexport async function getExecutorGroups() {\r\n  return request('/v1/jobs/system/executors', {\r\n    method: 'GET',\r\n  });\r\n}\r\n\r\n/** 添加任务 */\r\nexport async function addJob(job: Partial<API.JobDef>) {\r\n  return request('/v1/jobs', {\r\n    method: 'POST',\r\n    data: job,\r\n  });\r\n}\r\n\r\n/** 更新任务 */\r\nexport async function updateJob(job: Partial<API.JobDef>) {\r\n  return request(`/v1/jobs/${job.jobId}`, {\r\n    method: 'PUT',\r\n    data: job,\r\n  });\r\n}\r\n\r\n/** 删除任务 */\r\nexport async function deleteJob(jobId: number) {\r\n  return request(`/v1/jobs/${jobId}`, {\r\n    method: 'DELETE',\r\n  });\r\n}\r\n\r\n/** 启动任务 */\r\nexport async function startJob(jobId: number | string) {\r\n  return request(`/v1/job-control/jobs/${jobId}/start`, {\r\n    method: 'POST',\r\n    data: { jobId },\r\n  });\r\n}\r\n\r\n/** 停止任务（支持批次号） */\r\nexport async function stopJob(jobCode: string, batchNo?: string) {\r\n  const params = batchNo ? { batchNo } : {};\r\n  return request(`/v1/job-control/job/${jobCode}/stop`, {\r\n    method: 'POST',\r\n    params,\r\n  });\r\n}\r\n\r\n/** 暂停任务（支持批次号） */\r\nexport async function pauseJob(jobCode: string, batchNo?: string) {\r\n  const params = batchNo ? { batchNo } : {};\r\n  return request(`/v1/job-control/job/${jobCode}/pause`, {\r\n    method: 'POST',\r\n    params,\r\n  });\r\n}\r\n\r\n/** 恢复任务（支持批次号） */\r\nexport async function resumeJob(jobCode: string, batchNo?: string) {\r\n  const params = batchNo ? { batchNo } : {};\r\n  return request(`/v1/job-control/job/${jobCode}/resume`, {\r\n    method: 'POST',\r\n    params,\r\n  });\r\n}\r\n\r\n/** 取消任务（支持批次号） */\r\nexport async function cancelJob(jobCode: string, batchNo?: string) {\r\n  const params = batchNo ? { batchNo } : {};\r\n  return request(`/v1/job-control/job/${jobCode}/cancel`, {\r\n    method: 'POST',\r\n    params,\r\n  });\r\n}\r\n\r\n/** 获取执行日志列表 */\r\nexport async function getJobExecutionLogList(params: API.JobLogParams) {\r\n  return request('/v1/jobs/logs', {\r\n    method: 'GET',\r\n    params,\r\n  });\r\n}\r\n\r\n/** 清除执行日志 */\r\nexport async function clearJobExecutionLog(logId: number) {\r\n  return request(`/v1/jobs/logs/${logId}`, {\r\n    method: 'DELETE',\r\n  });\r\n}\r\n\r\n/** 获取执行日志详情 */\r\nexport async function getJobExecutionLogDetail(logId: number) {\r\n  return request(`/v1/jobs/logs/${logId}`, {\r\n    method: 'GET',\r\n  });\r\n}\r\n\r\n// ==================== 根据执行日志ID操作 ====================\r\n\r\n/** 根据执行日志ID暂停任务 */\r\nexport async function pauseJobByLogId(logId: number) {\r\n  return request(`/v1/job-control/job/execution/${logId}/pause`, {\r\n    method: 'POST',\r\n  });\r\n}\r\n\r\n/** 根据执行日志ID恢复任务 */\r\nexport async function resumeJobByLogId(logId: number) {\r\n  return request(`/v1/job-control/job/execution/${logId}/resume`, {\r\n    method: 'POST',\r\n  });\r\n}\r\n\r\n/** 根据执行日志ID停止任务 */\r\nexport async function stopJobByLogId(logId: number) {\r\n  return request(`/v1/job-control/job/execution/${logId}/stop`, {\r\n    method: 'POST',\r\n  });\r\n}\r\n\r\n/** 根据执行日志ID取消任务 */\r\nexport async function cancelJobByLogId(logId: number) {\r\n  return request(`/v1/job-control/job/execution/${logId}/cancel`, {\r\n    method: 'POST',\r\n  });\r\n}\r\n\r\n// ==================== 作业组控制接口（支持批次号） ====================\r\n\r\n/** 暂停作业组（支持批次号） */\r\nexport async function pauseJobGroup(groupName: string, batchNo?: string) {\r\n  const params = batchNo ? { batchNo } : {};\r\n  return request(`/v1/job-control/group/${groupName}/pause`, {\r\n    method: 'POST',\r\n    params,\r\n  });\r\n}\r\n\r\n/** 恢复作业组（支持批次号） */\r\nexport async function resumeJobGroup(groupName: string, batchNo?: string) {\r\n  const params = batchNo ? { batchNo } : {};\r\n  return request(`/v1/job-control/group/${groupName}/resume`, {\r\n    method: 'POST',\r\n    params,\r\n  });\r\n}\r\n\r\n/** 停止作业组（支持批次号） */\r\nexport async function stopJobGroup(groupName: string, batchNo?: string) {\r\n  const params = batchNo ? { batchNo } : {};\r\n  return request(`/v1/job-control/group/${groupName}/stop`, {\r\n    method: 'POST',\r\n    params,\r\n  });\r\n}\r\n\r\n/** 取消作业组（支持批次号） */\r\nexport async function cancelJobGroup(groupName: string, batchNo?: string) {\r\n  const params = batchNo ? { batchNo } : {};\r\n  return request(`/v1/job-control/group/${groupName}/cancel`, {\r\n    method: 'POST',\r\n    params,\r\n  });\r\n}\r\n\r\n// ==================== 批次级别操作 ====================\r\n\r\n/** 根据批次号批量暂停任务 */\r\nexport async function batchPauseJobsByBatchNo(batchNo: string) {\r\n  return request(`/v1/job-control/batch/${batchNo}/pause`, {\r\n    method: 'POST',\r\n  });\r\n}\r\n\r\n/** 根据批次号批量停止任务 */\r\nexport async function batchStopJobsByBatchNo(batchNo: string) {\r\n  return request(`/v1/job-control/batch/${batchNo}/stop`, {\r\n    method: 'POST',\r\n  });\r\n}\r\n\r\n/** 获取批次中的所有作业 */\r\nexport async function getBatchJobs(batchNo: string) {\r\n  return request(`/v1/job-control/batch/${batchNo}/jobs`, {\r\n    method: 'GET',\r\n  });\r\n}\r\n\r\n/** 获取批次中的所有作业组 */\r\nexport async function getBatchGroups(batchNo: string) {\r\n  return request(`/v1/job-control/batch/${batchNo}/groups`, {\r\n    method: 'GET',\r\n  });\r\n}\r\n\r\n/** 清理批次数据 */\r\nexport async function cleanupBatchData(batchNo: string) {\r\n  return request(`/v1/job-control/batch/${batchNo}`, {\r\n    method: 'DELETE',\r\n  });\r\n}\r\n\r\n/** 获取批次统计信息 */\r\nexport async function getBatchStatistics(batchNo: string) {\r\n  return request(`/v1/job-control/batch/${batchNo}/statistics`, {\r\n    method: 'GET',\r\n  });\r\n}\r\n\r\n// ==================== 状态查询接口（支持批次号） ====================\r\n\r\n/** 获取作业状态（支持批次号） */\r\nexport async function getJobStatus(jobCode: string, batchNo?: string) {\r\n  const params = batchNo ? { batchNo } : {};\r\n  return request(`/v1/job-control/job/${jobCode}/status`, {\r\n    method: 'GET',\r\n    params,\r\n  });\r\n}\r\n\r\n/** 获取作业组状态（支持批次号） */\r\nexport async function getGroupStatus(groupName: string, batchNo?: string) {\r\n  const params = batchNo ? { batchNo } : {};\r\n  return request(`/v1/job-control/group/${groupName}/status`, {\r\n    method: 'GET',\r\n    params,\r\n  });\r\n} "],"names":[],"mappings":"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"}